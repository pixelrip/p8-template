pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
a={b={},c={}}
a.c["config/constants"]=function()
d=false
e=30
return true
end
a.c["utils/log"]=function()
function f(g)
printh(tostr(g),"log",false)
end
end
a.c["core/game-state"]=function()
h={}
h.__index=h
function h:i()
local j=setmetatable({},self)
return j
end
function h:k() end
function h:l() end
function h:m() end
function h:n() end
o={
p=nil,
q={}
}
function o:add(r,s)
self.q[r]=s
end
function o:u(r,...)
if self.p then
self.p:n()
end
self.p=self.q[r]
if self.p then
self.p:k(...)
end
end
function o:l()
if self.p then
self.p:l()
end
end
function o:m()
if self.p then
self.p:m()
end
end
end
a.c["core/input-manager"]=function()
v={
p={{false,false,false,false,false,false},{false,false,false,false,false,false}},
w={{false,false,false,false,false,false},{false,false,false,false,false,false}},
x={{0,0,0,0,0,0},{0,0,0,0,0,0}},
y={{0,0,0,0,0,0},{0,0,0,0,0,0}},
z=0,
ba=10,
bb=30,
bc=6
}
function v:k()
for bd=0,1 do
for be=0,5 do
self.p[bd+1][be+1]=false
self.w[bd+1][be+1]=false
self.x[bd+1][be+1]=0
self.y[bd+1][be+1]=0
end
end
self.z=0
end
function v:l()
if self.z>0 then
self.z-=1
end
for bd=0,1 do
for be=0,5 do
self.w[bd+1][be+1]=self.p[bd+1][be+1]
self.p[bd+1][be+1]=btn(be,bd)
if self.x[bd+1][be+1]>0 then
self.x[bd+1][be+1]-=1
end
if self.p[bd+1][be+1] then
self.y[bd+1][be+1]+=1
else
self.y[bd+1][be+1]=0
end
end
end
end
function v:bf(bg,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
return self.p[bj][bi] and
not self.w[bj][bi] and
self.x[bj][bi]==0 and
self.z==0
end
function v:bk(bg,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
return not self.p[bj][bi] and self.w[bj][bi]
end
function v:bl(bg,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
return self.p[bj][bi]
end
function v:bm(bg,bn,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
bn=bn or self.bb
return self.y[bj][bi]>=bn
end
function v:bo(bg,bn,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
bn=bn or self.bb
return self.y[bj][bi]==bn
end
function v:bp(bg,bq,br,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
bq=bq or self.bb
br=br or self.bc
if self.p[bj][bi] and not self.w[bj][bi] and
self.x[bj][bi]==0 and self.z==0 then
return true
end
if self.y[bj][bi]>=bq then
local bs=self.y[bj][bi]-bq
return bs%br==0
end
return false
end
function v:bt(bg,bu,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
self.x[bj][bi]=bu or self.ba
end
function v:bv(bu)
self.z=bu or self.ba
end
function v:bw(bg,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
if self.p[bj][bi] then
self.x[bj][bi]=32767
elseif self.x[bj][bi]>0 and not self.p[bj][bi] then
self.x[bj][bi]=0
end
end
function v:bx()
for bd=0,1 do
for be=1,6 do
self.x[bd+1][be]=0
end
end
self.z=0
end
function v:by(bg,bh)
bh=bh or 0
local bi=bg+1
local bj=bh+1
return self.y[bj][bi]
end
end
a.c["systems/collision"]=function()
bz={}
function bz.ca(cb,cc,cd,ce,cf,cg)
return cb>=cd and cb<cd+cf and
cc>=ce and cc<ce+cg
end
function bz.ch(ci,cj,ck,cl,cm,cn,co,cp)
return ci<cm+co and cm<ci+ck and
cj<cn+cp and cn<cj+cl
end
function bz.cq(ci,cj,cr,cm,cn,cs)
local ct,cu=cm-ci,cn-cj
local cv=ct*ct+cu*cu
local cw=(cr+cs)*(cr+cs)
return cv<=cw
end
function bz.cx(cy,cz)
return bz.ch(cy.da,cy.db,cy.dc,cy.dd,
cz.da,cz.db,cz.dc,cz.dd)
end
end
a.c["states/title"]=function()
de=h:i()
function de:k()
f("Entering Title State")
music(0)
end
function de:l()
end
function de:m()
cls()
print("boilerplate",42,60,7)
sspr(8,0,15,11,57,80)
end
function de:n()
f("Exiting Title State")
end
end
function df(bd)
local dg=a.b
if(dg[bd]==nil) dg[bd]=a.c[bd]()
if(dg[bd]==nil) dg[bd]=true
return dg[bd]
end
df("config/constants")
df("utils/log")
df("core/game-state")
df("core/input-manager")
df("systems/collision")
df("states/title")
function _init()
f("=== Game Started ===")
v:k()
o:add("title",de)
o:u("title")
end
function _update()
v:l()
o:l()
end
function _draw()
o:m()
end
__gfx__
000000000000ee000ee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ee00e0e00ee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000eeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000ee0ee0eee0ee0ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000e0eeeeeeeee0e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000eeeeeeee0eeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eee00ee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000e0000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eee0eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__gff__
__map__
__sfx__
010a00000c0730000310073000030c073000031807300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003000030000300003
010a00000c4400040010440004000c440004001844000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400004000040000400
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 00014344

